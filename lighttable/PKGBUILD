# Maintainer: Hugo Osvaldo Barrera <hugo@barrera.io>
# Contributor: Tony Sokhon <tonyskn@gmail.com>
# Contributor: Ebubekir KARUL <ebubekirkarul@yandex.com>
# Contributor: Gaurish Sharma <contact@gaurishsharma.com>
# Contributor: Massimiliano Torromeo <massimiliano.torromeo@gmail.com>
# Contributor: Katrina L. Halliwell <rambaldi.kat.47@gmail.com>
# Contributor: Eugenio Ferreira <eugfcl@gmail.com>

pkgname=lighttable
pkgver=0.6.6
pkgrel=1
pkgdesc="New interactive IDE that lets you modify running programs and embed anything from websites to games."
url="http://www.lighttable.com/"
license=('GPLv3')
depends=("nss" "libx11" "libxrandr" "libpng" "gconf" "libudev.so.0")
options=(!strip)
arch=('i686' 'x86_64')
source=(lighttable
        $pkgname-$pkgver-$CARCH.tar.gz::http://d35ac8ww5dfjyg.cloudfront.net/playground/bins/$pkgver/LightTableLinux.tar.gz
        lighttable.desktop
        lighttable.png)
md5sums=('e772b3547fdc3a6e32f81e7303422fd1'
         '01d3f4c8a398fb335c7c4a2810023655'
         '04a62702b59810a36bca7623bf9e932c'
         'f8c055be2f047ff4aaffdd028f62f027')
PKGEXT=".pkg.tar"

if [[ "$CARCH" == "i686" ]]; then
  source[1]=$pkgname-$pkgver-$CARCH.tar.gz::http://d35ac8ww5dfjyg.cloudfront.net/playground/bins/$pkgver/LightTableLinux64.tar.gz
  md5sums[1]='94d3f5906db70bfc272686160ae90d67'
fi

package() {
  install -Dm 755 "$srcdir/lighttable" "$pkgdir/usr/bin/lighttable"

  _destdir="$pkgdir/opt/LightTable"

  install -dm755 $_destdir
  mv $srcdir/LightTable/* $_destdir

  install -Dm 644 "$srcdir/lighttable.desktop" "$pkgdir/usr/share/applications/lighttable.desktop"
  install -Dm 644 "$srcdir/lighttable.png" "$pkgdir/usr/share/pixmaps/lighttable.png"
}
